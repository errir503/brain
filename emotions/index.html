<!doctype html>
<html lang="en">
	<head>
		<title>Emotion detection</title>
		<meta charset="utf-8">
		<link href="./styles/bootstrap.min.css" rel="stylesheet" type="text/css">
		<link href="./styles/styles.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<script src="./js/libs/utils.js"></script>
		<script src="./js/libs/chart.min.js"></script>
		<script src="./js/clmtrackr.min.js"></script>
		<script src="./js/emotion_classifier.js"></script>
		<script src="./js/emotionmodel.js"></script>
		<script src="./models/model_pca_20_svm.js"></script>

		<div class="content">
			<a href="/"><button class="homeButton" type="button" name="button" style="color: #fff;filter: grayscale(1);border-color: #5bc0de;z-index:9999;">Home</button></a>

			<div class="canvas-demo">
				<div>
					<div class="input">
						<div class="placeholder"></div>
						<video width="600" height="400" id="video" preload="auto" loop playsinline autoplay></video>
						<canvas width="600" height="400" id="overlay"></canvas>
					</div>
					<div class="controls">
						<button type="button" name="button" disabled="disabled" onclick="startVideo()" id="startbutton">Loading...</button>
					</div>
					<div class="headset">
						<div class="wrapper">
							<div class="status tracking red"></div>Tracking score<span id="track-score">0.00</span>
						</div>
						<div class="wrapper">
							<div class="status headset red"></div><span id="status">Disconnected</span><span id="signal-strength">0.00</span>
						</div>
						<div class="wrapper">
							&nbsp;<span id="received"></span>
						</div>
					</div>
				</div>
				<div id="brainy">
					<iframe id="brainy-iframe" src="http://localhost:3000/kawashima/" width="400" height="400" onload="access()"></iframe>
				</div>
			</div>
			<div>
				<div class="charts">
					<canvas id="chart-emotions" width="300" height="300"></canvas>
					<canvas id="chart-signals" width="600" height="300"></canvas>
					<canvas id="chart-correlation" width="400" height="400"></canvas>
				</div>
			</div>
		</div>

		<script src="./js/demo.js"></script>
		<script type="text/javascript">
			function access() {
				const iframe = document.getElementById("brainy-iframe")
				const innerDoc = iframe.contentDocument || iframe.contentWindow.document
				innerDoc.querySelectorAll("a, audio").forEach(n => n.remove())
				innerDoc.body.style.backgroundImage = ""
			}
		</script>
	</body>
</html>
